{% extends 'base.html' %}
{% block title %}Confirmar Resultado del Partido / ArenaGG{% endblock %}

{% block content %}
<h2 class="text-warning mb-4">Confirmar Resultado del Partido</h2>

<div class="card bg-dark text-white border-secondary mb-4">
    <div class="card-header bg-black d-flex justify-content-between align-items-center">
        <strong>{{ match.team1.name }} vs {{ match.team2.name }}</strong>
    </div>
    <div class="card-body">
        <p>Elige el ganador de este partido.</p>

        {% if not match.team1_confirmed %}
        <form method="post" class="mb-3">
            {% csrf_token %}
            <label for="team1_winner" class="text-white">
                <input type="radio" name="winner" value="team1" class="form-check-input">
                {{ match.team1.name }} es el ganador
            </label><br>
            <button type="submit" class="btn btn-success w-100 fw-bold">Confirmar resultado</button>
        </form>
        {% else %}
        <div class="alert alert-success mb-3">
            <strong>{{ match.team1.name }}</strong> ya ha confirmado el resultado.
        </div>
        {% endif %}

        {% if not match.team2_confirmed %}
        <form method="post" class="mb-3">
            {% csrf_token %}
            <label for="team2_winner" class="text-white">
                <input type="radio" name="winner" value="team2" class="form-check-input">
                {{ match.team2.name }} es el ganador
            </label><br>
            <button type="submit" class="btn btn-success w-100 fw-bold">Confirmar resultado</button>
        </form>
        {% else %}
        <div class="alert alert-success mb-3">
            <strong>{{ match.team2.name }}</strong> ya ha confirmado el resultado.
        </div>
        {% endif %}

        {% if match.team1_confirmed and match.team2_confirmed %}
        <div class="alert alert-info text-center">
            Ambos equipos han confirmado el resultado. El partido est√° <strong>completado</strong>.
        </div>
        {% endif %}
    </div>
</div>

<div class="d-flex justify-content-center gap-3">
    <a href="{% url 'web:tournamentDetailView' match.tournament.id %}" class="btn btn-secondary">
        <i class="bi bi-arrow-left"></i> Volver al torneo
    </a>
</div>

{% endblock %}
